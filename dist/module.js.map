{"mappings":";;;ACAA;;AAWO,MAAM,4CAAS,CAAC,UAAqC,eAAoB,EAAE,GAAe;IAC/F,MAAM,OAAO,OAAO,aAAa,WAAW,WAAW,CAAA,GAAA,cAAM,EAAE,SAAS;IACxE,IAAI,OAAO,SAAS,UAAU;QAC5B,QAAQ,KAAK,CAAC,qDAAqD;QACnE,MAAM,IAAI,MAAM,qDAAoD;IACtE,CAAC;IACD,MAAM,CAAC,OAAO,OAAO,GAAG,CAAA,GAAA,eAAO,EAAE,CAAA,GAAA,UAAE,CAAC,CAAC,KAAK,KAAK,YAAY,CAAA,GAAA,UAAG,AAAD,CAAC,CAAC,KAAK,GAAG,YAAY;IACnF,CAAA,GAAA,gBAAS,AAAD,EAAE,IAAM;QACd,MAAM,WAAW,IAAY;YAC3B,OAAO,CAAA,GAAA,UAAG,AAAD,CAAC,CAAC,KAAK;QAClB;QACA,MAAM,WAAW,CAAA,GAAA,cAAM,EAAE,MAAM;QAC/B,OAAO,IAAM;YACX,CAAA,GAAA,gBAAS,AAAD,EAAE;QACZ;IACF;IACA,MAAM,WAAW,CAAC,QAAqB;QACrC,CAAA,GAAA,UAAE,CAAC,CAAC,KAAK,GAAG;IACd;IACA,OAAO;QAAC;QAAO;KAAS;AAC1B;;AD/BA","sources":["src/index.ts","src/use-xin.ts"],"sourcesContent":["export { useXin } from './use-xin'","import { useState, useEffect } from 'react'\nimport { xin, observe, unobserve, xinPath, XinTouchableType } from 'xinjs'\n\ntype HookType = [\n  value: any,\n  setValue: (newValue: any) => void\n]\n\n// TODO declare type the way it's declated for useState so that TypeScript\n// passes through type of initialValue to the right thing\n\nexport const useXin = (observed: string | XinTouchableType, initialValue: any = ''): HookType => {\n  const path = typeof observed === 'string' ? observed : xinPath(observed)\n  if (typeof path !== 'string') {\n    console.error('useXin must either be passed a path or a XinProxy', observed)\n    throw new Error('useXin must either be passed a path or a XinProxy')\n  }\n  const [value, update] = useState(xin[path] !== undefined ? xin[path] : initialValue)\n  useEffect(() => {\n    const observer = (): void => {\n      update(xin[path])\n    }\n    const listener = observe(path, observer)\n    return () => {\n      unobserve(listener)\n    }\n  })\n  const setValue = (value: any): void => {\n    xin[path] = value\n  }\n  return [value, setValue]\n}\n"],"names":[],"version":3,"file":"module.js.map","sourceRoot":"../"}