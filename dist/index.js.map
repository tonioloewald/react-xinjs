{
  "version": 3,
  "sources": ["../src/use-tosi.ts", "../src/version.ts"],
  "sourcesContent": [
    "import React, {\n  useState,\n  useEffect,\n  createElement,\n  FunctionComponent,\n  ComponentPropsWithRef,\n} from \"react\";\nimport { xin, observe, unobserve, xinPath, XinTouchableType } from \"tosijs\";\n\ntype HookType<T = any> = [value: T, setValue: (newValue: T) => void];\n\n// TODO declare type the way it's declared for useState so that TypeScript\n// passes through type of initialValue to the right thing\n\nexport const useTosi = function <T = any>(\n  observed: XinTouchableType,\n  initialValue: T,\n): HookType<T> {\n  const path = typeof observed === \"string\" ? observed : xinPath(observed);\n  if (typeof path !== \"string\") {\n    console.error(\n      \"useXin must either be passed a path or a XinProxy\",\n      observed,\n    );\n    throw new Error(\"useXin must either be passed a path or a XinProxy\");\n  }\n  const [value, update] = useState(\n    xin[path] !== undefined ? xin[path] : initialValue,\n  );\n  useEffect(() => {\n    const observer = (): void => {\n      update(xin[path]);\n    };\n    const listener = observe(path, observer);\n    return () => {\n      unobserve(listener);\n    };\n  });\n  const setValue = (value: any): void => {\n    xin[path] = value;\n  };\n  return [value, setValue];\n};\n\nexport const useXin = useTosi;\n\nexport type WebComponent<\n  P extends object = {},\n  E extends HTMLElement = HTMLElement,\n> = FunctionComponent<\n  ComponentPropsWithRef<\"div\"> & P & { ref?: React.Ref<E> }\n>;\n\ntype WebComponentProxy = Record<string, WebComponent>;\n\nexport const reactWebComponents: WebComponentProxy = new Proxy(\n  {} as WebComponentProxy,\n  {\n    get(target, key): WebComponent {\n      if (typeof key !== \"string\") {\n        return (target as any)[key];\n      }\n\n      if (!target[key]) {\n        const tagName = key.replace(\n          /([a-z])([A-Z])/g,\n          (_: string, first: string, last: string): string => {\n            return first + \"-\" + last.toLocaleLowerCase();\n          },\n        );\n        target[key] = (props: any) =>\n          createElement<any, Element>(tagName, props);\n      }\n      return target[key];\n    },\n  },\n);\n",
    "export const version = '1.0.2'"
  ],
  "mappings": "AAAA,mBACE,eACA,mBACA,cAIF,cAAS,aAAK,eAAS,aAAW,eAO3B,IAAM,EAAU,QAAkB,CACvC,EACA,EACa,CACb,IAAM,EAAO,OAAO,IAAa,SAAW,EAAW,EAAQ,CAAQ,EACvE,GAAI,OAAO,IAAS,SAKlB,MAJA,QAAQ,MACN,oDACA,CACF,EACU,MAAM,mDAAmD,EAErE,IAAO,EAAO,GAAU,EACtB,EAAI,KAAU,OAAY,EAAI,GAAQ,CACxC,EAaA,OAZA,EAAU,IAAM,CAId,IAAM,EAAW,EAAQ,EAHR,IAAY,CAC3B,EAAO,EAAI,EAAK,EAEqB,EACvC,MAAO,IAAM,CACX,EAAU,CAAQ,GAErB,EAIM,CAAC,EAHS,CAAC,IAAqB,CACrC,EAAI,GAAQ,EAES,GAGZ,EAAS,EAWT,EAAwC,IAAI,MACvD,CAAC,EACD,CACE,GAAG,CAAC,EAAQ,EAAmB,CAC7B,GAAI,OAAO,IAAQ,SACjB,OAAQ,EAAe,GAGzB,GAAI,CAAC,EAAO,GAAM,CAChB,IAAM,EAAU,EAAI,QAClB,kBACA,CAAC,EAAW,EAAe,IAAyB,CAClD,OAAO,EAAQ,IAAM,EAAK,kBAAkB,EAEhD,EACA,EAAO,GAAO,CAAC,IACb,EAA4B,EAAS,CAAK,EAE9C,OAAO,EAAO,GAElB,CACF,EC5EO,IAAM,EAAU",
  "debugId": "8828996F6710F34064756E2164756E21",
  "names": []
}